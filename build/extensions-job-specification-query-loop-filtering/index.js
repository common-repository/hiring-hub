(()=>{"use strict";const e=window.wp.hooks,t=window.wp.element,i=window.wp.i18n,a=window.wp.apiFetch,o=window.wp.data,s=(e,t)=>(0,o.useSelect)((i=>{if("settings"===t){const o=`get${a=t,a.charAt(0).toUpperCase()+a.slice(1)}`;return{data:i(e)[o](),hasStartedResolution:i(e).hasStartedResolution(o),hasFinishedResolution:i(e).hasFinishedResolution(o),isResolving:i(e).isResolving(o)}}var a;return i(e).getData(t)})),n=window.wp.editor,r=(e=>{const t=e.replace("-"," ").replace(/\s(.)/g,(e=>e.toUpperCase())).replace(/\s/g,"").replace(/^(.)/,(e=>e.toLowerCase()));if(void 0===window?.teydeaStudio?.[t]?.dataStore){window.teydeaStudio=window.teydeaStudio||{},window.teydeaStudio[t]=window.teydeaStudio[t]||{};const i={data:{},settings:{}},s={setData:e=>({type:"SET_DATA",data:e}),setSettings:e=>({type:"SET_SETTINGS",data:e}),fetchFromAPI:e=>({type:"FETCH_FROM_API",path:e})};window.teydeaStudio[t].dataStore=(0,o.createReduxStore)(t,{reducer(e=i,t){switch(t.type){case"SET_DATA":return{...e,data:{...e.data,[t.data.key]:t.data.value}};case"SET_SETTINGS":return{...e,settings:t.data}}return e},actions:s,initialState:i,selectors:{getData:(e,t)=>e.data?.[t],getSettings:e=>e.settings},controls:{FETCH_FROM_API:e=>a({path:e.path})},resolvers:{*getSettings(){const t=`/${e}/v1/settings`,i=yield s.fetchFromAPI(t);return s.setSettings(i)}}}),(0,o.register)(window.teydeaStudio[t].dataStore)}return window.teydeaStudio[t].dataStore})("hiring-hub");(0,e.addFilter)("hiring_hub__block_query_loop_filtering_filter__available_filters","teydeastudio/hiring-hub/job-specification-query-loop-filtering",(e=>{const[a,d]=(0,t.useState)([]),l=(()=>{const e="jobSpecification",[i,a]=(0,t.useState)(s(r,e)),d=(0,o.useSelect)((e=>e(n.store).getEditedPostAttribute("meta")),[]),l=s(r,"settings");return(0,t.useEffect)((()=>{l.hasFinishedResolution&&a(((e,t)=>{var i;return Object.values(null!==(i=e.data?.jobSpecification)&&void 0!==i?i:{}).map((e=>{var i;const a=`hiring_hub__job_specification__${e.key}`,o={field:e,metaKey:a,value:null!==(i=t?.[a])&&void 0!==i?i:e.defaultValue};return"array_of_strings"===e.type&&(o.allowedChoices="unlimited"===e.allowedChoices?"unlimited":Number.parseInt(e.allowedChoices,10)),o}))})(l,d))}),[d,l]),(0,t.useEffect)((()=>{(0,o.dispatch)(r).setData({key:e,value:i})}),[i]),i})();return(0,t.useEffect)((()=>{if(void 0!==l){let e=!1,t=[];for(const i of l)e||"boolean"!==i.field.type||(e=!0),t.push({label:i.field.name,value:i.field.key});e&&(t=[{label:(0,i.__)("Job characteristics","hiring-hub"),value:"job-specification-characteristics"},...t]),d(t)}}),[l]),[...e,...a]}))})();