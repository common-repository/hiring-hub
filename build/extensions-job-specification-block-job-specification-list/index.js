(()=>{"use strict";var e,t={976:(e,t,i)=>{const s=(e,t,i=!0)=>{const s=e.slice();if(i)s.push(t);else{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}return s},n=window.wp.data,r=window.wp.editor,o=window.wp.apiFetch;var a=i.n(o);const l=window.wp.blockEditor,c=window.wp.blocks,u=window.wp.components,d=window.wp.element,p=window.wp.i18n,h=window.wp.url,f=(e,t)=>(0,n.useSelect)((i=>{if("settings"===t){const n=`get${s=t,s.charAt(0).toUpperCase()+s.slice(1)}`;return{data:i(e)[n](),hasStartedResolution:i(e).hasStartedResolution(n),hasFinishedResolution:i(e).hasFinishedResolution(n),isResolving:i(e).isResolving(n)}}var s;return i(e).getData(t)})),b=(e=>{const t=e.replace("-"," ").replace(/\s(.)/g,(e=>e.toUpperCase())).replace(/\s/g,"").replace(/^(.)/,(e=>e.toLowerCase()));if(void 0===window?.teydeaStudio?.[t]?.dataStore){window.teydeaStudio=window.teydeaStudio||{},window.teydeaStudio[t]=window.teydeaStudio[t]||{};const i={data:{},settings:{}},s={setData:e=>({type:"SET_DATA",data:e}),setSettings:e=>({type:"SET_SETTINGS",data:e}),fetchFromAPI:e=>({type:"FETCH_FROM_API",path:e})};window.teydeaStudio[t].dataStore=(0,n.createReduxStore)(t,{reducer(e=i,t){switch(t.type){case"SET_DATA":return{...e,data:{...e.data,[t.data.key]:t.data.value}};case"SET_SETTINGS":return{...e,settings:t.data}}return e},actions:s,initialState:i,selectors:{getData:(e,t)=>e.data?.[t],getSettings:e=>e.settings},controls:{FETCH_FROM_API:e=>o({path:e.path})},resolvers:{*getSettings(){const t=`/${e}/v1/settings`,i=yield s.fetchFromAPI(t);return s.setSettings(i)}}}),(0,n.register)(window.teydeaStudio[t].dataStore)}return window.teydeaStudio[t].dataStore})("hiring-hub"),w=window.ReactJSXRuntime,g=(e,t)=>"url"===t?(0,w.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e}):e;(0,c.registerBlockType)("hiring-hub/job-specification-list",{edit:({attributes:e,setAttributes:t,context:i})=>{const{showAllItems:o,disallowedItems:c}=e,[m,v]=(0,d.useState)(null),[S,_]=(0,d.useState)(null),y=(0,n.useSelect)((e=>e(r.store).getCurrentPostId()),[]),k=(()=>{const e="jobSpecification",[t,i]=(0,d.useState)(f(b,e)),s=(0,n.useSelect)((e=>e(r.store).getEditedPostAttribute("meta")),[]),o=f(b,"settings");return(0,d.useEffect)((()=>{o.hasFinishedResolution&&i(((e,t)=>{var i;return Object.values(null!==(i=e.data?.jobSpecification)&&void 0!==i?i:{}).map((e=>{var i;const s=`hiring_hub__job_specification__${e.key}`,n={field:e,metaKey:s,value:null!==(i=t?.[s])&&void 0!==i?i:e.defaultValue};return"array_of_strings"===e.type&&(n.allowedChoices="unlimited"===e.allowedChoices?"unlimited":Number.parseInt(e.allowedChoices,10)),n}))})(o,s))}),[s,o]),(0,d.useEffect)((()=>{(0,n.dispatch)(b).setData({key:e,value:t})}),[t]),t})(),j=(0,l.useBlockProps)(),x=(0,l.useInnerBlocksProps)(j),[I]=(0,d.useState)(i.postId!==y),{baseControlProps:C,controlProps:F}=(0,u.useBaseControlProps)({preferredId:"hiring-hub-extensions-job-specification-block-job-specification-list-allowed-items"});return(0,d.useEffect)((()=>{if(void 0!==k){const i=I?[]:((e,t)=>{let i=[];return void 0!==e&&(i=e.map((e=>{var i;if(t.includes(e.field.key))return null;let s;switch(e.field.type){case"array_of_strings":s=null!==(i=e?.value)&&void 0!==i?i:[];break;case"boolean":s=[!0===e.value?(0,p.__)("Yes","hiring-hub"):(0,p.__)("No","hiring-hub")];break;case"date":case"text":case"url":if(""===e?.value)return null;s=[e.value];break;case"integer":s=[e.value.toString()];break;case"salary":{var n,r;const{locale:t}=window.teydeaStudio.hiringHub.jobSpecificationList,i=((e,t=null)=>{try{return JSON.parse(e)}catch(e){return t}})(null!==(n=e?.value)&&void 0!==n?n:"");if(null===i||!0!==(null!==(r=i?.isDefined)&&void 0!==r&&r))return null;if(void 0===i?.currency||void 0===i?.min||void 0===i?.max)return null;const o={style:"currency",currency:i.currency,maximumFractionDigits:0},a=i.min===i.max?new Intl.NumberFormat(t,o).format(i.min):(0,p.sprintf)("%1$s - %2$s",new Intl.NumberFormat(t,o).format(i.min),new Intl.NumberFormat(t,o).format(i.max));s=[(0,p.sprintf)("%1$s / %2$s",a,i.unit)];break}}return 0===s.length?null:{label:e.field.name,type:e.field.type,values:s}})).filter((e=>null!==e))),i})(k,c);e=m,t=i,JSON.stringify(e)!==JSON.stringify(t)&&v(i)}var e,t}),[k,c,I,m]),(0,d.useEffect)((()=>{I?a()({path:`/hiring-hub/v1/block-job-specification-list/?post_id=${i.postId}&show_all_items=${o}&disallowed_items=${JSON.stringify(c)}`,method:"GET"}).then((e=>_(e))).catch((e=>{console.error(e)})):_(m)}),[i.postId,m,I,o,c]),null===S?(0,w.jsx)(u.Spinner,{}):(0,w.jsxs)(d.Fragment,{children:[(0,w.jsx)(l.InspectorControls,{children:(0,w.jsxs)(u.PanelBody,{title:(0,p.__)("Settings","hiring-hub"),children:[(0,w.jsx)(u.ToggleControl,{label:(0,p.__)("Show all job specification items","hiring-hub"),checked:o,onChange:e=>{t({showAllItems:e,disallowedItems:!0===e?[]:c})}}),!o&&(0,w.jsx)(u.BaseControl,{...C,label:(0,p.__)("Allow following items:","hiring-hub"),children:(0,w.jsx)(d.Fragment,{...F,children:k&&k.map((e=>(0,w.jsx)(u.CheckboxControl,{__nextHasNoMarginBottom:!0,label:e.field.name,checked:!c.includes(e.field.key),onChange:i=>{t({disallowedItems:s(c,e.field.key,!i)})}},e.field.key)))})})]})}),(0,w.jsx)("div",{...x,children:S.map(((e,t)=>(0,w.jsxs)("div",{className:`wp-block-hiring-hub-job-specification-items__item wp-block-hiring-hub-job-specification__item--${(0,h.cleanForSlug)(e.label)}`,children:[(0,w.jsx)("p",{className:"wp-block-hiring-hub-job-specification-list__item-label",children:e.label}),(0,w.jsx)("p",{className:"wp-block-hiring-hub-job-specification-list__item-values",children:e.values.map(((t,i)=>(0,w.jsx)("span",{className:`wp-block-hiring-hub-job-specification-list__item-value wp-block-hiring-hub-job-specification-list__item-value--${(0,h.cleanForSlug)(t)}`,children:g(t,e.type)},(0,p.sprintf)("%1$d-%2$s",i,(0,h.cleanForSlug)(t)))))})]},(0,p.sprintf)("%1$d-%2$s",t,(0,h.cleanForSlug)(e.label)))))})]})},save:()=>{const e=l.useBlockProps.save(),t=l.useInnerBlocksProps.save(e);return(0,w.jsx)("div",{...t})}})}},i={};function s(e){var n=i[e];if(void 0!==n)return n.exports;var r=i[e]={exports:{}};return t[e](r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,i,n,r)=>{if(!i){var o=1/0;for(u=0;u<e.length;u++){i=e[u][0],n=e[u][1],r=e[u][2];for(var a=!0,l=0;l<i.length;l++)(!1&r||o>=r)&&Object.keys(s.O).every((e=>s.O[e](i[l])))?i.splice(l--,1):(a=!1,r<o&&(o=r));if(a){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[i,n,r]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var n,r,o=i[0],a=i[1],l=i[2],c=0;if(o.some((t=>0!==e[t]))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);if(l)var u=l(s)}for(t&&t(i);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},i=self.webpackChunk=self.webpackChunk||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var n=s.O(void 0,[350],(()=>s(976)));n=s.O(n)})();