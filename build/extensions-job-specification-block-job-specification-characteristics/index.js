(()=>{"use strict";var e,t={882:(e,t,i)=>{const s=(e,t,i=!0)=>{const s=e.slice();if(i)s.push(t);else{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}return s},a=window.wp.data,o=window.wp.editor,r=window.wp.apiFetch;var n=i.n(r);const c=window.wp.blockEditor,l=window.wp.blocks,d=window.wp.components,u=window.wp.element,h=window.wp.i18n,p=window.wp.url,w=(e,t)=>(0,a.useSelect)((i=>{if("settings"===t){const a=`get${s=t,s.charAt(0).toUpperCase()+s.slice(1)}`;return{data:i(e)[a](),hasStartedResolution:i(e).hasStartedResolution(a),hasFinishedResolution:i(e).hasFinishedResolution(a),isResolving:i(e).isResolving(a)}}var s;return i(e).getData(t)})),f=(e=>{const t=e.replace("-"," ").replace(/\s(.)/g,(e=>e.toUpperCase())).replace(/\s/g,"").replace(/^(.)/,(e=>e.toLowerCase()));if(void 0===window?.teydeaStudio?.[t]?.dataStore){window.teydeaStudio=window.teydeaStudio||{},window.teydeaStudio[t]=window.teydeaStudio[t]||{};const i={data:{},settings:{}},s={setData:e=>({type:"SET_DATA",data:e}),setSettings:e=>({type:"SET_SETTINGS",data:e}),fetchFromAPI:e=>({type:"FETCH_FROM_API",path:e})};window.teydeaStudio[t].dataStore=(0,a.createReduxStore)(t,{reducer(e=i,t){switch(t.type){case"SET_DATA":return{...e,data:{...e.data,[t.data.key]:t.data.value}};case"SET_SETTINGS":return{...e,settings:t.data}}return e},actions:s,initialState:i,selectors:{getData:(e,t)=>e.data?.[t],getSettings:e=>e.settings},controls:{FETCH_FROM_API:e=>r({path:e.path})},resolvers:{*getSettings(){const t=`/${e}/v1/settings`,i=yield s.fetchFromAPI(t);return s.setSettings(i)}}}),(0,a.register)(window.teydeaStudio[t].dataStore)}return window.teydeaStudio[t].dataStore})("hiring-hub"),b=window.ReactJSXRuntime;(0,l.registerBlockType)("hiring-hub/job-specification-characteristics",{edit:({attributes:e,setAttributes:t,context:i})=>{const{showAllEnabledCharacteristics:r,disallowedCharacteristics:l}=e,[g,S]=(0,u.useState)(null),[v,y]=(0,u.useState)(null),_=(0,a.useSelect)((e=>e(o.store).getCurrentPostId()),[]),j=(()=>{const e="jobSpecification",[t,i]=(0,u.useState)(w(f,e)),s=(0,a.useSelect)((e=>e(o.store).getEditedPostAttribute("meta")),[]),r=w(f,"settings");return(0,u.useEffect)((()=>{r.hasFinishedResolution&&i(((e,t)=>{var i;return Object.values(null!==(i=e.data?.jobSpecification)&&void 0!==i?i:{}).map((e=>{var i;const s=`hiring_hub__job_specification__${e.key}`,a={field:e,metaKey:s,value:null!==(i=t?.[s])&&void 0!==i?i:e.defaultValue};return"array_of_strings"===e.type&&(a.allowedChoices="unlimited"===e.allowedChoices?"unlimited":Number.parseInt(e.allowedChoices,10)),a}))})(r,s))}),[s,r]),(0,u.useEffect)((()=>{(0,a.dispatch)(f).setData({key:e,value:t})}),[t]),t})(),k=(0,c.useBlockProps)(),C=(0,c.useInnerBlocksProps)(k),[m]=(0,u.useState)(i.postId!==_),{baseControlProps:x,controlProps:E}=(0,d.useBaseControlProps)({preferredId:"hiring-hub-extensions-job-specification-block-job-specification-characteristics-allowed-characteristics"});return(0,u.useEffect)((()=>{if(void 0!==j){const i=m?[]:((e,t)=>{const i=[];for(const s of e)"boolean"!==s.field.type||!0!==s.value||t.includes(s.field.key)||i.push(s.field.name);return i})(j,l);e=g,t=i,JSON.stringify(e)!==JSON.stringify(t)&&S(i)}var e,t}),[j,l,g,m]),(0,u.useEffect)((()=>{m?n()({path:`/hiring-hub/v1/block-job-specification-characteristics/?post_id=${i.postId}&show_all_enabled_characteristics=${r}&disallowed_characteristics=${JSON.stringify(l)}`,method:"GET"}).then((e=>y(e))).catch((e=>{console.error(e)})):y(g)}),[i.postId,g,m,r,l]),null===v?(0,b.jsx)(d.Spinner,{}):(0,b.jsxs)(u.Fragment,{children:[(0,b.jsx)(c.InspectorControls,{children:(0,b.jsxs)(d.PanelBody,{title:(0,h.__)("Settings","hiring-hub"),children:[(0,b.jsx)(d.ToggleControl,{label:(0,h.__)("Show all enabled job specification characteristics","hiring-hub"),checked:r,onChange:e=>{t({showAllEnabledCharacteristics:e,disallowedCharacteristics:!0===e?[]:l})}}),!r&&(0,b.jsx)(d.BaseControl,{...x,label:(0,h.__)("Allow following characteristics:","hiring-hub"),help:(0,h.__)("If a characteristic is disabled at the post level, it will not be displayed anyway. In this settings you control whether or not to display characteristics that are enabled at the post level.","hiring-hub"),children:(0,b.jsx)(u.Fragment,{...E,children:j&&j.map((e=>"boolean"!==e.field.type?null:(0,b.jsx)(d.CheckboxControl,{__nextHasNoMarginBottom:!0,label:e.field.name,checked:!l.includes(e.field.key),onChange:i=>{t({disallowedCharacteristics:s(l,e.field.key,!i)})}},e.field.key)))})})]})}),(0,b.jsx)("ul",{...C,children:v.map(((e,t)=>(0,b.jsx)("li",{className:`wp-block-hiring-hub-job-specification-characteristics__characteristic wp-block-hiring-hub-job-specification__characteristic--${(0,p.cleanForSlug)(e)}`,children:e},(0,h.sprintf)("%1$d-%2$s",t,(0,p.cleanForSlug)(e)))))})]})},save:()=>{const e=c.useBlockProps.save(),t=c.useInnerBlocksProps.save(e);return(0,b.jsx)("ul",{...t})}})}},i={};function s(e){var a=i[e];if(void 0!==a)return a.exports;var o=i[e]={exports:{}};return t[e](o,o.exports,s),o.exports}s.m=t,e=[],s.O=(t,i,a,o)=>{if(!i){var r=1/0;for(d=0;d<e.length;d++){i=e[d][0],a=e[d][1],o=e[d][2];for(var n=!0,c=0;c<i.length;c++)(!1&o||r>=o)&&Object.keys(s.O).every((e=>s.O[e](i[c])))?i.splice(c--,1):(n=!1,o<r&&(r=o));if(n){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,a,o]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var a,o,r=i[0],n=i[1],c=i[2],l=0;if(r.some((t=>0!==e[t]))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(c)var d=c(s)}for(t&&t(i);l<r.length;l++)o=r[l],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},i=self.webpackChunk=self.webpackChunk||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var a=s.O(void 0,[350],(()=>s(882)));a=s.O(a)})();